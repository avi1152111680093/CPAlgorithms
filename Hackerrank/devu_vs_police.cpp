#include <bits/stdc++.h>

typedef long long LL;

using namespace std;

LL gcd(LL a, LL b)
{
    while (b)
    {
        a %= b;
        swap(a, b);
    }

    return a;
}

long long mod_mult(long long a, long long b, long long c)
{
    a %= c;
    long long ret = 0;

    while (b)
    {
        if (b & 1)
        {
            ret += a;
            if (ret >= c)
                ret -= c;
        }

        a <<= 1;
        if (a >= c)
            a -= c;
        b >>= 1;
    }

    return ret;
}

LL phi(LL n)
{
    LL result = n;
    for (LL i = 2; i * i <= n; i++)
    {
        if (n % i == 0)
        {
            while (n % i == 0)
                n /= i;
            result -= result / i;
        }
    }
    if (n > 1)
        result -= result / n;
    return result;
}

LL binmodpow(LL a, LL n, LL m)
{
    LL ans = 1;
    LL pow = a;
    while (n)
    {
        if (n & 1)
            ans = (ans * pow) % m;
        pow = (pow * pow) % m;
        n >>= 1;
    }

    return ans % m;
}

int main()
{
    int t;
    cin >> t;

    while (t--)
    {
        LL n1, k1, n2, k2, n;
        cin >> n1 >> k1 >> n2 >> k2 >> n;

        if (k1 == 0 || (n2 == 0 && k2 != 0))
        {
            cout << 1 % n << endl;
            continue;
        }
        if (n2 == 1 || k2 == 0)
        {
            cout << binmodpow(n1, k1, n) << endl;
            continue;
        }
        if (n1 == 0 || n1 % n == 0)
        {
            cout << 0 << endl;
            continue;
        }
        if (k2 == 1)
        {
            cout << binmodpow(n1, k1 * n2, n) << endl;
            continue;
        }

        LL phi_n = phi(n);

        LL temp = mod_mult(k1 % phi_n, binmodpow(n2, k2, phi_n), phi_n);
        // LL temp = (k1 % phi_n * binmodpow(n2, k2, phi_n)) % phi_n;
        LL ans = binmodpow(n1, phi_n + temp, n);

        cout << ans % n << endl;
        // (k1*binpowmod(n2,k2,phi_n))%phi_n * binpowmod(n1,phi_n,n)
    }

    return 0;
}

// vector<vector<int>> input = {{0,0,0,0,1},
// {0,0,0,0,2},
// {0,0,0,0,3},
// {0,0,0,1,1},
// {0,0,0,1,2},
// {0,0,0,1,3},
// {0,0,0,2,1},
// {0,0,0,2,2},
// {0,0,0,2,3},
// {0,0,1,0,1},
// {0,0,1,0,2},
// {0,0,1,0,3},
// {0,0,1,1,1},
// {0,0,1,1,2},
// {0,0,1,1,3},
// {0,0,1,2,1},
// {0,0,1,2,2},
// {0,0,1,2,3},
// {0,0,2,0,1},
// {0,0,2,0,2},
// {0,0,2,0,3},
// {0,0,2,1,1},
// {0,0,2,1,2},
// {0,0,2,1,3},
// {0,0,2,2,1},
// {0,0,2,2,2},
// {0,0,2,2,3},
// {0,1,0,0,1},
// {0,1,0,0,2},
// {0,1,0,0,3},
// {0,1,0,1,1},
// {0,1,0,1,2},
// {0,1,0,1,3},
// {0,1,0,2,1},
// {0,1,0,2,2},
// {0,1,0,2,3},
// {0,1,1,0,1},
// {0,1,1,0,2},
// {0,1,1,0,3},
// {0,1,1,1,1},
// {0,1,1,1,2},
// {0,1,1,1,3},
// {0,1,1,2,1},
// {0,1,1,2,2},
// {0,1,1,2,3},
// {0,1,2,0,1},
// {0,1,2,0,2},
// {0,1,2,0,3},
// {0,1,2,1,1},
// {0,1,2,1,2},
// {0,1,2,1,3},
// {0,1,2,2,1},
// {0,1,2,2,2},
// {0,1,2,2,3},
// {0,2,0,0,1},
// {0,2,0,0,2},
// {0,2,0,0,3},
// {0,2,0,1,1},
// {0,2,0,1,2},
// {0,2,0,1,3},
// {0,2,0,2,1},
// {0,2,0,2,2},
// {0,2,0,2,3},
// {0,2,1,0,1},
// {0,2,1,0,2},
// {0,2,1,0,3},
// {0,2,1,1,1},
// {0,2,1,1,2},
// {0,2,1,1,3},
// {0,2,1,2,1},
// {0,2,1,2,2},
// {0,2,1,2,3},
// {0,2,2,0,1},
// {0,2,2,0,2},
// {0,2,2,0,3},
// {0,2,2,1,1},
// {0,2,2,1,2},
// {0,2,2,1,3},
// {0,2,2,2,1},
// {0,2,2,2,2},
// {0,2,2,2,3},
// {1,0,0,0,1},
// {1,0,0,0,2},
// {1,0,0,0,3},
// {1,0,0,1,1},
// {1,0,0,1,2},
// {1,0,0,1,3},
// {1,0,0,2,1},
// {1,0,0,2,2},
// {1,0,0,2,3},
// {1,0,1,0,1},
// {1,0,1,0,2},
// {1,0,1,0,3},
// {1,0,1,1,1},
// {1,0,1,1,2},
// {1,0,1,1,3},
// {1,0,1,2,1},
// {1,0,1,2,2},
// {1,0,1,2,3},
// {1,0,2,0,1},
// {1,0,2,0,2},
// {1,0,2,0,3},
// {1,0,2,1,1},
// {1,0,2,1,2},
// {1,0,2,1,3},
// {1,0,2,2,1},
// {1,0,2,2,2},
// {1,0,2,2,3},
// {1,1,0,0,1},
// {1,1,0,0,2},
// {1,1,0,0,3},
// {1,1,0,1,1},
// {1,1,0,1,2},
// {1,1,0,1,3},
// {1,1,0,2,1},
// {1,1,0,2,2},
// {1,1,0,2,3},
// {1,1,1,0,1},
// {1,1,1,0,2},
// {1,1,1,0,3},
// {1,1,1,1,1},
// {1,1,1,1,2},
// {1,1,1,1,3},
// {1,1,1,2,1},
// {1,1,1,2,2},
// {1,1,1,2,3},
// {1,1,2,0,1},
// {1,1,2,0,2},
// {1,1,2,0,3},
// {1,1,2,1,1},
// {1,1,2,1,2},
// {1,1,2,1,3},
// {1,1,2,2,1},
// {1,1,2,2,2},
// {1,1,2,2,3},
// {1,2,0,0,1},
// {1,2,0,0,2},
// {1,2,0,0,3},
// {1,2,0,1,1},
// {1,2,0,1,2},
// {1,2,0,1,3},
// {1,2,0,2,1},
// {1,2,0,2,2},
// {1,2,0,2,3},
// {1,2,1,0,1},
// {1,2,1,0,2},
// {1,2,1,0,3},
// {1,2,1,1,1},
// {1,2,1,1,2},
// {1,2,1,1,3},
// {1,2,1,2,1},
// {1,2,1,2,2},
// {1,2,1,2,3},
// {1,2,2,0,1},
// {1,2,2,0,2},
// {1,2,2,0,3},
// {1,2,2,1,1},
// {1,2,2,1,2},
// {1,2,2,1,3},
// {1,2,2,2,1},
// {1,2,2,2,2},
// {1,2,2,2,3},
// {2,0,0,0,1},
// {2,0,0,0,2},
// {2,0,0,0,3},
// {2,0,0,1,1},
// {2,0,0,1,2},
// {2,0,0,1,3},
// {2,0,0,2,1},
// {2,0,0,2,2},
// {2,0,0,2,3},
// {2,0,1,0,1},
// {2,0,1,0,2},
// {2,0,1,0,3},
// {2,0,1,1,1},
// {2,0,1,1,2},
// {2,0,1,1,3},
// {2,0,1,2,1},
// {2,0,1,2,2},
// {2,0,1,2,3},
// {2,0,2,0,1},
// {2,0,2,0,2},
// {2,0,2,0,3},
// {2,0,2,1,1},
// {2,0,2,1,2},
// {2,0,2,1,3},
// {2,0,2,2,1},
// {2,0,2,2,2},
// {2,0,2,2,3},
// {2,1,0,0,1},
// {2,1,0,0,2},
// {2,1,0,0,3},
// {2,1,0,1,1},
// {2,1,0,1,2},
// {2,1,0,1,3},
// {2,1,0,2,1},
// {2,1,0,2,2},
// {2,1,0,2,3},
// {2,1,1,0,1},
// {2,1,1,0,2},
// {2,1,1,0,3},
// {2,1,1,1,1},
// {2,1,1,1,2},
// {2,1,1,1,3},
// {2,1,1,2,1},
// {2,1,1,2,2},
// {2,1,1,2,3},
// {2,1,2,0,1},
// {2,1,2,0,2},
// {2,1,2,0,3},
// {2,1,2,1,1},
// {2,1,2,1,2},
// {2,1,2,1,3},
// {2,1,2,2,1},
// {2,1,2,2,2},
// {2,1,2,2,3},
// {2,2,0,0,1},
// {2,2,0,0,2},
// {2,2,0,0,3},
// {2,2,0,1,1},
// {2,2,0,1,2},
// {2,2,0,1,3},
// {2,2,0,2,1},
// {2,2,0,2,2},
// {2,2,0,2,3},
// {2,2,1,0,1},
// {2,2,1,0,2},
// {2,2,1,0,3},
// {2,2,1,1,1},
// {2,2,1,1,2},
// {2,2,1,1,3},
// {2,2,1,2,1},
// {2,2,1,2,2},
// {2,2,1,2,3},
// {2,2,2,0,1},
// {2,2,2,0,2},
// {2,2,2,0,3},
// {2,2,2,1,1},
// {2,2,2,1,2},
// {2,2,2,1,3},
// {2,2,2,2,1},
// {2,2,2,2,2},
// {2,2,2,2,3}}